<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Suli Home - Redirecting...</title>
  <script type="text/javascript">
    //
    // ---!!! ВАЖНАЯ НАСТРОЙКА !!!---
    //
    // Укажите, сколько "сегментов" в пути занимает название вашего репозитория.
    // Это нужно, чтобы скрипт правильно построил ссылку для переадресации.
    //
    // ПРИМЕРЫ:
    //
    // 1. Если ваш сайт находится по адресу: `my-username.github.io/my-cool-repo/`
    //    Путь `/my-cool-repo/` состоит из ОДНОГО сегмента.
    //    => Установите значение `1`.
    //
    // 2. Если вы используете главную страницу пользователя или кастомный домен: `my-username.github.io/`
    //    В пути нет названия репозитория.
    //    => Установите значение `0`.
    //
    const pathSegmentsToKeep = 1; // <--- ИЗМЕНИТЕ ЭТО ЗНАЧЕНИЕ, ЕСЛИ НУЖНО

    (function() {
      const location = window.location;
      
      // Получаем путь без домена (например, "/my-repo/en/product/slug")
      const path = location.pathname;

      // Разбиваем путь на части и убираем пустые значения
      const segments = path.split('/').filter(Boolean);

      // Отделяем часть пути, относящуюся к репозиторию
      const repoPath = segments.slice(0, pathSegmentsToKeep).join('/');

      // Отделяем часть пути для нашего SPA-роутера
      const spaPath = segments.slice(pathSegmentsToKeep).join('/');

      // Собираем новый URL для переадресации.
      // Он превращает: https://user.github.io/repo/en/product/slug
      // В:             https://user.github.io/repo/#/en/product/slug
      const redirectUrl = 
        location.origin + 
        (repoPath ? '/' + repoPath : '') +
        '/#' +
        spaPath +
        location.search +
        location.hash;

      // Перенаправляем пользователя. Использование .replace() не создает
      // лишней записи в истории браузера, поэтому кнопка "назад" будет работать правильно.
      location.replace(redirectUrl);

    })();
  </script>
</head>
<body>
  <p style="font-family: sans-serif; text-align: center; margin-top: 2rem;">
    Redirecting you to the correct page...
  </p>
</body>
</html>